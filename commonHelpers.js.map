{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/loader.js","../src/js/iziToasts.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.user-form'),\n  formInput: document.querySelector('.form-input'),\n  btn: document.querySelector('.form-button'),\n  galleryList: document.querySelector('.gallery'),\n  container: document.querySelector('.container'),\n  loader: document.querySelector('.loader'),\n  btnLoad: document.querySelector('.btn-load'),\n};\n","import { refs } from './refs';\n\nexport function loaderOn() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function loaderOff() {\n  refs.loader.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const MESSAGE =\n  'Sorry, there are no images matching your search query. Please try again!';\n\nexport const LIMIT =\n  \"We're sorry, but you've reached the end of search results.\";\n\nexport const CORRECT = 'Please enter correct information.';\n\nexport function onError(message) {\n  iziToast.error({\n    message: message,\n    position: 'topRight',\n  });\n}\n","import { refs } from './refs';\nimport { onError } from './iziToasts';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { perPage } from './pixabay-api';\n\nimport { MESSAGE } from './iziToasts';\nimport { LIMIT } from './iziToasts';\n\nexport let totalHits;\n\nexport let lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport function makeGalleryItem(response) {\n  const result = response.hits.map(makeMarcup).join('');\n  totalHits = response.totalHits;\n  if (totalHits > perPage) {\n    refs.btnLoad.classList.remove('hidden');\n  }\n  if (response.hits.length) {\n    refs.galleryList.insertAdjacentHTML('beforeend', result);\n  } else {\n    onError(MESSAGE);\n  }\n\n  lightbox.refresh();\n}\n\nexport function makeMarcup(image) {\n  return `<li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img\n            src=\"${image.webformatURL}\"\n            class=\"gallery-image\"\n            alt=\"${image.tags}\"\n          />\n        </a>\n        <div class=\"modat-text\">\n        \n            <div class=\"modal-element\"><p>Likes</p><span>${image.likes}</span></div>\n            <div class=\"modal-element\"><p>Views</p><span>${image.views}</span></div>\n            <div class=\"modal-element\"><p>Comments</p><span>${image.comments}</span></div>\n            <div class=\"modal-element\"><p>Downloads</p><span>${image.downloads}</span></div>\n        </div>\n      </li>`;\n}\n\n// export function scroll() {\n//   const galleryItem = document.querySelector('.gallery-item');\n//   if (galleryItem) {\n//     let rect = galleryItem.getBoundingClientRect();\n//     console.log(rect.height);\n//     window.scrollBy(0, rect.height * 2);\n//   }\n// }\n","import { refs } from './refs';\nimport { loaderOn } from './loader';\nimport { loaderOff } from './loader';\nimport { makeGalleryItem } from './render-functions';\nimport { onError } from './iziToasts';\nimport axios from 'axios';\nimport { MESSAGE } from './iziToasts';\nimport { totalHits } from './render-functions';\nimport { LIMIT } from './iziToasts';\nimport { CORRECT } from './iziToasts';\n// import { scroll } from './render-functions';\nimport { lightbox } from './render-functions';\n\nexport const perPage = 15;\nlet page;\nlet userSearch;\n\nexport async function onFormSubmit(event) {\n  event.preventDefault();\n  refs.btnLoad.classList.add('hidden');\n\n  refs.galleryList.innerHTML = '';\n  page = 1;\n  userSearch = event.target.elements.input.value.trim();\n  if (userSearch) {\n    try {\n      const response = await fetchImg(userSearch);\n      const item = makeGalleryItem(response);\n      return item;\n    } catch (error) {\n      onError(MESSAGE);\n    } finally {\n      loaderOff();\n      refs.form.reset();\n    }\n  } else {\n    refs.form.elements.input.value = '';\n    onError(CORRECT);\n  }\n}\n\nexport async function fetchImg(input) {\n  loaderOn();\n  const API_KEY = '42220995-e7901b62efa710cae16c4a0a7';\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  const parameters = `q=${input}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const URL = `?key=${API_KEY}&${parameters}`;\n\n  const config = {\n    params: {\n      per_page: perPage,\n      page: page,\n    },\n  };\n\n  const response = await axios.get(URL, config);\n  return response.data;\n}\n\nexport async function onLoadClick() {\n  page += 1;\n  const totalPages = Math.ceil(totalHits / perPage);\n  if (page >= totalPages) {\n    refs.btnLoad.classList.add('hidden');\n    onError(LIMIT);\n  } else {\n    const result = await fetchImg(userSearch);\n    const element = makeGalleryItem(result);\n    loaderOff();\n    lightbox.refresh();\n    return element;\n  }\n}\n\n// scrollPage();\n// function scrollPage() {\n//   if (page > 1) {\n//     const rect = document\n//       .querySelector('.gallery-item')\n//       .getBoundingClientRect();\n//     window.scrollBy({ top: rect.height * 2, left: 0, behavior: 'smooth' });\n//   }\n// }\n\n// if (parseInt(data.totalHits) > 0)\n//     { console.log(hit.pageURL) }\n// else\n//     console.log('No hits');\n","import { refs } from './js/refs';\nimport { onFormSubmit } from './js/pixabay-api';\nimport { onLoadClick } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// import { scroll } from './js/render-functions';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nrefs.btnLoad.addEventListener('click', onLoadClick);\n\n// document.addEventListener('scroll', scroll);\n"],"names":["refs","loaderOn","loaderOff","MESSAGE","LIMIT","CORRECT","onError","message","iziToast","totalHits","lightbox","SimpleLightbox","makeGalleryItem","response","result","makeMarcup","perPage","image","page","userSearch","onFormSubmit","event","fetchImg","input","API_KEY","axios","parameters","URL","config","onLoadClick","totalPages","element"],"mappings":"owBAAO,MAAMA,EAAO,CAClB,KAAM,SAAS,cAAc,YAAY,EACzC,UAAW,SAAS,cAAc,aAAa,EAC/C,IAAK,SAAS,cAAc,cAAc,EAC1C,YAAa,SAAS,cAAc,UAAU,EAC9C,UAAW,SAAS,cAAc,YAAY,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,WAAW,CAC7C,ECNO,SAASC,GAAW,CACzBD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASE,GAAY,CAC1BF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CCLO,MAAMG,EACX,2EAEWC,EACX,6DAEWC,EAAU,oCAEhB,SAASC,EAAQC,EAAS,CAC/BC,EAAS,MAAM,CACb,QAASD,EACT,SAAU,UACd,CAAG,CACH,CCPO,IAAIE,EAEAC,EAAW,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEM,SAASC,EAAgBC,EAAU,CACxC,MAAMC,EAASD,EAAS,KAAK,IAAIE,CAAU,EAAE,KAAK,EAAE,EACpDN,EAAYI,EAAS,UACjBJ,EAAYO,GACdhB,EAAK,QAAQ,UAAU,OAAO,QAAQ,EAEpCa,EAAS,KAAK,OAChBb,EAAK,YAAY,mBAAmB,YAAac,CAAM,EAEvDR,EAAQH,CAAO,EAGjBO,EAAS,QAAO,CAClB,CAEO,SAASK,EAAWE,EAAO,CAChC,MAAO;AAAA,mBACUA,EAAM,aAAa;AAAA;AAAA,mBAEnBA,EAAM,YAAY;AAAA;AAAA,mBAElBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,2DAK8BA,EAAM,KAAK;AAAA,2DACXA,EAAM,KAAK;AAAA,8DACRA,EAAM,QAAQ;AAAA,+DACbA,EAAM,SAAS;AAAA;AAAA,YAG9E,CCpCO,MAAMD,EAAU,GACvB,IAAIE,EACAC,EAEG,eAAeC,EAAaC,EAAO,CAOxC,GANAA,EAAM,eAAc,EACpBrB,EAAK,QAAQ,UAAU,IAAI,QAAQ,EAEnCA,EAAK,YAAY,UAAY,GAC7BkB,EAAO,EACPC,EAAaE,EAAM,OAAO,SAAS,MAAM,MAAM,OAC3CF,EACF,GAAI,CACF,MAAMN,EAAW,MAAMS,EAASH,CAAU,EAE1C,OADaP,EAAgBC,CAAQ,CAEtC,MAAe,CACdP,EAAQH,CAAO,CACrB,QAAc,CACRD,IACAF,EAAK,KAAK,OACX,MAEDA,EAAK,KAAK,SAAS,MAAM,MAAQ,GACjCM,EAAQD,CAAO,CAEnB,CAEO,eAAeiB,EAASC,EAAO,CACpCtB,IACA,MAAMuB,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAa,KAAKH,CAAK,2DACvBI,EAAM,QAAQH,CAAO,IAAIE,CAAU,GAEnCE,EAAS,CACb,OAAQ,CACN,SAAUZ,EACV,KAAME,CACP,CACL,EAGE,OADiB,MAAMO,EAAM,IAAIE,EAAKC,CAAM,GAC5B,IAClB,CAEO,eAAeC,GAAc,CAClCX,GAAQ,EACR,MAAMY,EAAa,KAAK,KAAKrB,EAAYO,CAAO,EAChD,GAAIE,GAAQY,EACV9B,EAAK,QAAQ,UAAU,IAAI,QAAQ,EACnCM,EAAQF,CAAK,MACR,CACL,MAAMU,EAAS,MAAMQ,EAASH,CAAU,EAClCY,EAAUnB,EAAgBE,CAAM,EACtC,OAAAZ,IACAQ,EAAS,QAAO,EACTqB,CACR,CACH,CCjEA/B,EAAK,KAAK,iBAAiB,SAAUoB,CAAY,EAEjDpB,EAAK,QAAQ,iBAAiB,QAAS6B,CAAW"}